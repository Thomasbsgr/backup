PROMPT='%~$'

# changement d'appel pour pip3 et python3
alias py="python3.13"
alias pip="pip3"

# Editeur par d√©faut vscode
export EDITOR="code"

# zsh
alias zshup="source ~/.zshrc"

# cd les plus utiles
alias doc="cd /Users/thomas/Documents/"
alias desk="cd /Users/thomas/Desktop"
alias user="cd /Users/thomas"

alias pyc="cd /Users/thomas/Documents/pythonProject/coursPython"
alias pyp="cd /Users/thomas/Documents/pythonProject"

alias corse="cd /Users/thomas/Documents/web/corse"

# Django
alias run="py manage.py runserver"
alias man="py manage.py"

# Venv
alias venv="source venv/bin/activate"
alias stop="deactivate"

# Odoo
alias odoo="cd /Users/thomas/Documents/odoo"

# Sass
alias sass="npm run sass"

# Encryptage
enc() {
  if [[ "$1" == "code" ]]; then
    if [ ! -f "backup.zip" ]; then
      echo "Fichier introuvable."
      return 1
    fi
    openssl enc -aes-256-cbc -salt -in "backup.zip" -out "papamaman.enc"
  else
    echo -n "Nom du fichier √† chiffrer : "
    read file
    if [ ! -f "$file" ]; then
      echo "Fichier introuvable."
      return 1
    fi
    openssl enc -aes-256-cbc -salt -in "$file" -out "$file.enc"
  fi
}

denc() {
  if [[ "$1" == "code" ]]; then
    if [ ! -f "papamaman.enc" ]; then
      echo "Fichier introuvable."
      return 1
    fi
    openssl enc -d -aes-256-cbc -in "papamaman.enc" -out "backup.zip"
  else
    echo -n "Nom du fichier chiffr√© (.enc) : "
    read file
    if [ ! -f "$file" ]; then
      echo "Fichier introuvable."
      return 1
    fi
    openssl enc -d -aes-256-cbc -in "$file" -out "$file.zip"
  fi
}

# Modif du dock
dock_speed() {
  if [[ "$1" == "on" ]]; then
    echo "üîß Activation du Dock rapide..."
    defaults write com.apple.dock autohide-delay -float 0
    defaults write com.apple.dock autohide-time-modifier -float 0.4
    killall Dock
    echo "‚úÖ Dock rapide activ√©."
  elif [[ "$1" == "off" ]]; then
    echo "‚ôªÔ∏è R√©initialisation des r√©glages du Dock..."
    defaults delete com.apple.dock autohide-delay 2>/dev/null
    defaults delete com.apple.dock autohide-time-modifier 2>/dev/null
    killall Dock
    echo "‚úÖ R√©glages du Dock r√©initialis√©s."
  else
    echo "‚ùó Utilisation : dock_speed on | off"
  fi
}

# Fonction backup fichier important
backup() {
  cd /Users/thomas/.backup_git || return

  # Recr√©e proprement le dossier util
  rm -rf util
  mkdir -p util

  # Sauvegarde zshrc
  cp ~/.zshrc ./zshrc_backup
  echo "‚úÖ Zsh mis √† jour"
  read -n 1

  # Sauvegarde des paquets Homebrew
  brew bundle dump --describe --file=./util/Brewfile --force
  echo "‚úÖ Brew mis √† jour"
  read -n 1

  # Sauvegarde Espanso (avec guillemets pour √©viter les erreurs d'espace)
  cp "/Users/thomas/Library/Application Support/espanso/match/base.yml" ./util/Espanso
  echo "‚úÖ Espanso mis √† jour"
  read -n 1

  # Commit et push Git
  git add .
  git commit -m "backup" || echo "‚ö†Ô∏è Rien √† committer"
  git push
  echo "‚úÖ Github mis √† jour"
  read -n 1

  echo "‚úÖ Mise √† jour termin√©e avec succ√®s !"
}
